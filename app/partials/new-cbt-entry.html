<div class="large-8 columns title">
	<img src="/app/img/logo.png" class="logo" />
	<div class="large-1 columns"></div>
</div>

<div ng-init="">
	<div class="row row-panel header">
		<div class="large-12 columns text-center progress-bar">
			<ol data-prog-steps="4" class="form-progress small-block-grid-4">
				<li>
					<div class="step radius" ng-class="{stepComplete: stage>
						1, stepSelected: stage==1}">
						Actions
					</div>
				</li>
				<div class="progressDivider"></div>
				<li>
					<div class="step radius" ng-class="{stepComplete: stage>
						2, stepSelected: stage==2, stepDisabled: stage
						<2}">Emotions</div>
					</li>
					<li>
						<div class="step radius" ng-class="{stepComplete: stage>
							3, stepSelected: stage==3, stepDisabled: stage
							<3}" >Beliefs</div>
						</li>
						<li>
							<div class="step radius" ng-class="{stepComplete: stage>
								4, stepSelected: stage==4, stepDisabled: stage
								<4}" >Change</div>
							</li>
						</ol>
					</div>
				</div>

				<div class="row row-panel main">
					<div class="large-7 columns">
						<div class="row">
							<div class="large-12 columns">
								<section ng-switch on="stage">
									<fieldset ng-switch-default class="hidden">
										<legend class="hidden">Fieldset</legend>

										<div class="row">
											<div class="large-12 columns text-center">
												<label>
													<h2>What situation upset you?</h2>
												</label>
												<textarea class="feelings" placeholder="" ng-model="cbtEntry.concern"></textarea>
											</div>
										</div>
										<div class="row">
											<div class="large-7 columns">200 characters maximum</div>
											<div class="large-5 columns text-center">
												<button class="small button" ng-click="$parent.stage='2'">Next</button>
											</div>
										</div>
									</fieldset>
									<fieldset class="hidden" ng-switch-when="2">
										<legend class="hidden">Fieldset</legend>
										<div class="row">
											<div class="large-12 columns">
												<h2>What are you feeling?</h2>
												<div class="emotion-basket">
													<ul id="emotion-list">
														<li class="emotion" ng-repeat="emotion in cbtEntry.emotions">{{emotion}}</li>
													</ul>
												</div>
												<div class="row entry">
													<div class="large-10 columns">
														<div class="row">
															<div class="large-4 columns inline">
																<label for="emotion-entry" class="right inline">I'm feeling</label>
															</div>
															<div class="large-8 columns">
																<input class="process" ng-model="newEmotion" type="text" placeholder="angry" id="emotion-entry" list="emotions">
																<datalist id="emotions">
																	<option value="angry"></option>
																	<option value="annoyed"></option>
																	<option value="unhappy"></option>
																	<option value="sad"></option>
																	<option value="melancholy"></option>
																	<option value="blue"></option>
																	<option value="pissed off"></option>
																	<option value="irritable"></option>
																	<option value="joyful"></option>
																	<option value="wonderful"></option>
																	<option value="angsty"></option>
																	<option value="anxious"></option>
																	<option value="worried"></option>
																	<option value="violent"></option>
																	<option value="wound up"></option>
																	<option value="joyless"></option>
																	<option value="cold"></option>
																	<option value="warm"></option>
																	<option value="loving"></option>
																	<option value="paranoid"></option>
																	<option value="unbearable"></option>
																	<option value="fed up"></option>
																	<option value="grumpy"></option>
																	<option value="fiery"></option>
																	<option value="powerless"></option>
																	<option value="weak"></option>
																	<option value="crushed"></option>
																	<option value="determined"></option>
																	<option value="effusive"></option>
																	<option value="great"></option>
																</datalist>
															</div>
														</div>
													</div>
													<div class="large-2 columns">
														<button ng-click="addEmotion(newEmotion)" href="#" class="button prefix">Add</button>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="large-5 columns text-center large-offset-7">
													<button class="small button" ng-click="$parent.stage='3'">Next</button>
												</div>
											</div>
										</fieldset>
										<fieldset ng-switch-when="3" class="hidden">
											<legend class="hidden">Fieldset</legend>
											<div class="row">
												<div class="large-12 columns">
													<div class="emotion-basket">
														<ul>
															<li class="emotion" ng-repeat="belief in negativeBeliefsCopy">{{belief}}</li>
														</ul>
													</div>
													<h2>
														Try to name all your negative thoughts. What are they? Add a new entry for each one.
													</h2>
													<textarea class="thoughts" placeholder="Write it all down" ng-model="negativeBelief"></textarea>
													<button ng-click="addBelief(negativeBelief)" href="#" class="button prefix">Add</button>
												</div>
											</div>
											<div class="row">
												<div class="large-5 columns text-center large-offset-7">
													<button class="small button" ng-click="$parent.stage='4'">Next</button>
												</div>
											</div>
										</fieldset>
										<fieldset ng-switch-when="4" class="hidden">
											<legend class="hidden">Fieldset</legend>
											<div class="row">
												<div class="large-12 columns">
													<h2>Challenge your thoughts</h2>
													<h3>
														For this belief, identify all of the appropriate distortions. And write why they are applicable.
													</h3>
														{{negBelief}}
														<form class="custom"> <!-- form needs to be here with class custom for check box to work -->

															<ul>
																<li>
																	<label for="checkbox1">
																		<input type="checkbox" id="checkbox1" style="display: none;" ng-model="cbtEntry.negativeBeliefs[negBelief]">
																		<span class="custom checkbox checked"></span>
																		{{curDistortion}}
																	</label>
																</li>
															</ul>
														</form>
													<textarea ng-model="newthought" placeholder="given this distortion, what's your new thought"></textarea>
												</div>
											</div>
											<button class="small button" ng-click="nextNegBelief(curDistortion, negBelief, newthought); newthought=''">Done</button>

										</fieldset>
										<fieldset ng-switch-when="5" class="hidden">
											<legend class="hidden">Fieldset</legend>
											<div class="row">
												<div class="large-12 columns">
													<h2>Review</h2>
													<p>
														So you <strong>{{cbtEntry.concern}}</strong> and this made you feel, <strong ng-repeat="emotion in cbtEntry.emotions">{{emotion}}, </strong>
														and you thought this meant that you were <strong ng-repeat="(negBelief, distortionList) in cbtEntry.negativeBeliefs">{{negBelief}},</strong>
														but you realised that
														<strong ng-repeat="distortion in distortionlist">{{distortion['why']}},</strong>
														Great!
													</p>
												</div>
											</div>
											<a class="button" href="#/dashboard">See record of previous problems</a>
										</fieldset>
									</section>
								</div>
							</div>
						</div>
						<div ng-switch on="stage">
							<div class="large-5 columns help" ng-switch-default>
							    <h3>What do I do here?</h3>
							    <p>Concisely describe a recent incident that is currently troubling you. Note details about what you and others did and what happened. If nothing immediately springs to mind, consider a prominent event from the past 24 hours.</p>
							    <p>In this step, only write facts you can objectively prove. This will help you to separate the incident from your interpretation so you can understand the different ways it could be interpreted and what feelings result.</p>
							</div>
							<div class="large-5 columns help" ng-switch-when="2">
							    <h3>What do I do here?</h3>
							    <p>Just write down anything and everything you're feeling at the moment, it doesn't matter if you think it's connected to the problem or not. This stage helps you to identify your feelings to start lifting them.</p>
							    <p>We'll come back to these later to see if they change after you've completed the process.</p>
							</div>
							<div class="large-5 columns help" ng-switch-when="3">
							    <h3>What do I do here?</h3>
							    <p>This step is all about finding the irrational thoughts that lead to unhealthy negative emotions.</p>
							    <p>Write down everything you can think of including what other people might have thought, what could happen in the future and judgements you've made about yourself.</p>
							</div>
							<div class="large-5 columns help" ng-switch-when="4">
							    <h3>What do I do here?</h3>
							    <p>Now it's time to find the reasons why these thoughts that are making you upset might not be true. For each thought you identified, there is a series of questions to test it. Imagine yourself as a lawyer questioning this thought in court. How might you undermine the case?</p>
							    <p>You don't need to worry about your feelings or any other details right now. This part is important, so try to think carefully in each question about whether it's true.
							</div>
							<div class="large-5 columns help" ng-switch-when="5">
								<h3>That's it!</h3>
							    <p>You're done. Read carefully through the passage on the left to consolidate the new more rational thought.
							    <p>Did this help?</p>
							    <p>
							    	<a class="button pass">Yes, I feel better now</a> <a class="button fail">No, I feel the same/worse</a>
							   	</p>
							    <p style="display:none">
									<a class="button" href="#/dashboard">See record of previous problems</a>
								</p>
							</div>
							</div>
						</div>

					</div>
				</div>
				<div id="introModal" class="reveal-modal">
					<h2>Welcome to Spruce</h2>
					<p class="lead">
						We're taking you to your first dispute so you can try it out straight away. Don't worry if you don't have time right now, we'll be right here waiting for you when you're ready.
					</p>
					<p class="lead">
						Spruce is based on a mental model of the mind that states that it's not what happens to us, but the way we interpret it that makes us feel the way we do. In the process you'll write about a situation that has upset you, add what negative feelings it caused for you, then identify how your interpretation might have made you upset. Finally you'll be prompted with some suggestions of how to make your thinking more rational in this particular case. This will help you to worry less about the situation.
					</p>
					<h2>What happens to my data?</h2>
					<p class="lead">
						Everything you type is encrypted and stored securely on our servers. We'll never see your entries in a readable format, we don't store your IP address and we won't know who you are.
					</p>
					<button class="button" ng-click="closeModal();">Make me happy</button>
					<a class="close-reveal-modal">&#215;</a>
				</div>