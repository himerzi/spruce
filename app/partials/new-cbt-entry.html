<div class="large-8 columns title">
	<h1>Spruce</h1>
	<div class="large-1 columns"></div>
</div>

<div ng-init="">
	<div class="row row-panel header">
		<div class="large-12 columns text-center progress-bar">
			<ol data-prog-steps="4" class="form-progress small-block-grid-4">
				<li>
					<div class="step radius" ng-class="{stepComplete: stage>
						1, stepSelected: stage==1}">
						Actions
					</div>
				</li>
				<div class="progressDivider"></div>
				<li>
				<div class="step radius" ng-class="{stepComplete: stage>
					2, stepSelected: stage==2, stepDisabled: stage
					<2}">Emotions</div>
				</li>
				<li>
					<div class="step radius" ng-class="{stepComplete: stage>
						3, stepSelected: stage==3, stepDisabled: stage
						<3}" >Beliefs</div>
					</li>
					<li>
						<div class="step radius" ng-class="{stepComplete: stage>
							4, stepSelected: stage==4, stepDisabled: stage
							<4}" >Change</div>
						</li>
					</ol>
				</div>
			</div>

				<div class="row row-panel main">
					<div class="large-7 columns">
						<div class="row">
							<div class="large-12 columns">
								<section ng-switch on="stage">
									<fieldset ng-switch-default class="hidden">
										<legend class="hidden"></legend>

										<div class="row" id="situationTextArea">
											<div class="large-12 columns">
												<h2>What situation upset you?</h2>
												<h3>Describe the facts without feelings or subjective thoughts</h3>
												<textarea class="feelings" placeholder='' ng-model="cbtEntry.concern" required autofocus="autofocus"></textarea>
											</div>
										</div>
										<div class="row">
											<div class="large-5 columns text-center large-offset-7">
												<button class="small button" ng-click="$parent.stage='2'">Next step - emotions</button>
											</div>
										</div>
									</fieldset>
									<fieldset class="hidden" ng-switch-when="2">
										<legend class="hidden">Fieldset</legend>
										<div class="row">
											<div class="large-12 columns">
												<h2>What do you feel about this?</h2>
												<h3>{{cbtEntry.concern}}</h3>
												<div class="emotion-basket">
													<ul id="emotion-list">
														<li class="emotion" ng-repeat="emotion in cbtEntry.emotions">{{emotion}}</li>
													</ul>
												</div>
												<form>
													<div class="row entry">
														<div class="large-10 columns">
															<div class="row">
																<div class="large-4 columns inline">
																	<label for="emotion-entry" class="right inline">I'm feeling... (one at a time) </label>
																</div>
																<div class="large-8 columns">
																	<input class="process" ng-model="$parent.newEmotion" type="text" placeholder="" id="emotion-entry" list="emotions" autofocus="autofocus">
																	<datalist id="emotions">
																		<option value="angry"></option>
																		<option value="annoyed"></option>
																		<option value="unhappy"></option>
																		<option value="sad"></option>
																		<option value="melancholy"></option>
																		<option value="blue"></option>
																		<option value="pissed off"></option>
																		<option value="irritable"></option>
																		<option value="joyful"></option>
																		<option value="wonderful"></option>
																		<option value="angsty"></option>
																		<option value="anxious"></option>
																		<option value="worried"></option>
																		<option value="violent"></option>
																		<option value="wound up"></option>
																		<option value="joyless"></option>
																		<option value="cold"></option>
																		<option value="warm"></option>
																		<option value="loving"></option>
																		<option value="paranoid"></option>
																		<option value="unbearable"></option>
																		<option value="fed up"></option>
																		<option value="grumpy"></option>
																		<option value="fiery"></option>
																		<option value="powerless"></option>
																		<option value="weak"></option>
																		<option value="crushed"></option>
																		<option value="determined"></option>
																		<option value="effusive"></option>
																		<option value="great"></option>
																	</datalist>
																</div>
															</div>
														</div>
														<div class="large-2 columns">
															<button ng-click="addEmotion(newEmotion)" href="#" class="button prefix">Add</button>
														</div>
													</form>
												</div>
											</div>
											<div class="row">
												<div class="large-5 columns text-center large-offset-7">
													<button class="small button" ng-click="$parent.stage='3'">Next step - beliefs</button>
												</div>
											</div>
										</fieldset>
										<fieldset ng-switch-when="3" class="hidden">
											<legend class="hidden">Fieldset</legend>
											<div class="row">
												<div class="large-12 columns">
													<h2>What do you believe about this situation?</h2>
													<h3>Situation: <em>{{cbtEntry.concern}}</em></h3>
													<h4>Examples</h4>
													<h4>"My boss will think I'm stupid and not promote me"<br/>"This is going to end in disaster"<br/>"She ignored me, she must not like me"</h4>
													<div class="emotion-basket">
														<ul>
															<li class="emotion" ng-repeat="belief in negativeBeliefsCopy">{{belief}}</li>
														</ul>
													</div>
													<form>
														<input type="text" class="thoughts process" id="beliefs-entry" placeholder="" ng-model="$parent.negativeBelief" autofocus="autofocus" />
														<button ng-click="addBelief(negativeBelief)" href="#" class="button prefix">Add this thought</button>
													</form>
												</div>
											</div>
											<div class="row">
												<div class="large-5 columns text-center large-offset-7">
													<button class="small button" ng-click="$parent.stage='4'">Done, show next step</button>
												</div>
											</div>
										</fieldset>
										<fieldset ng-switch-when="4" class="hidden">
											<div class="row">
												<div class="large-12 columns">
													<h2>Your belief: <i>{{negBelief}}</i></h2>
													<h3>Click on any questions that might be appropriate</h3>

												</div>
												<div ng-show="firstDistortionSelected.focusText" class="large-2 columns">
													<!-- i class="large-icon foundicon-right-arrow"></i-->
												</div>
											</div>
											<div class="row">
												<div class="large-12 columns">
													<div class="section-container accordion" data-section="accordion">
													  <section ng-repeat="(distortionLabel, distortion) in distortions | orderBy:'shortDescription'" id="{{distortionLabel}}">
													    <p class="title" data-section-title><a href="">{{distortion['shortDescription']}}<i ng-show="selected" class="foundicon-star blue-icon"></i></a></p>
													    <div class="content" data-section-content>
													    	<p>{{distortion['fullDescription']}}</p>
													    	<div class="row">
													    	  <div class="small-12 columns">
													    	    <button class="button prefix" ng-hide="selected" ng-click=" selected=true; newThoughts.push(distortionLabel); firstDistortionSelected.state = true;">This question applies to my belief</button>
													    	    <div class="" ng-show="selected"><!--h5 class="subheader" >Great! Write something about this on the right.</h5-->
													    	    	<label>Enter any thoughts that come to mind.</label>
													    	    <textarea ng-model="changeStep.reformedThought" class="tall-textarea" rows="40" autofocus="autofocus"></textarea>
													    	    <button class="small button pass" ng-click="closeAccordion()">Ok</button>
													    		</div>
													    	  </div>
													    	</div>
													    </div>
													  </section>
													</div>



													<!-- button ng-show="showIsADistortion" ng-click="showIsADistortion=false; nextNegBelief(curDistortion, negBelief, newthought)" href="#" class="button prefix">Save this thought</button -->
												</div>
													<div class="row">
											    		<div class="large-6 large-offset-3 columns help">
											    			<button class="small button pass" ng-click="nextNegBelief()">{{nextBelief}}</button>
											    		</div>
											    	</div>
											</div>


										</fieldset>
										<fieldset ng-switch-when="5" class="hidden">
											<legend class="hidden">Fieldset</legend>
											<div class="row">
												<div class="large-12 columns">
													<h2>Review</h2>
													<p>
														So, <strong>{{cbtEntry.concern}}</strong>, and this made you feel: <strong ng-repeat="emotion in cbtEntry.emotions">{{emotion}}, </strong>
														and you thought this meant that:
														<ul>
															<li ng-repeat="(negBelief, distortionList) in cbtEntry.negativeBeliefs">
																<strong >{{negBelief}}</strong>, <em>however:</em>
																<ul>
																		<li> <em>You've realised this is:</em>
																		<span ng-repeat="dist in distortionList['distortions']">
																			{{dist}},
																		</span>
																			<li><em>So, you're now thinking: </em> <strong>{{distortionList['newThought']}}</strong></li>
																		</li>

																</ul>
															</li>
														</ul>
													</p>
													<p>
														How have your emotions (<span ng-repeat="emotion in cbtEntry.emotions">{{emotion}}, </span>), changed after focussing on these new beliefs?
													</p>
												</div>
											</div>
											<a class="button" href="#/dashboard">See record of previous problems</a>
										</fieldset>
									</section>
								</div>
							</div>
						</div>
						<div ng-switch on="stage">
							<div class="large-5 columns help" ng-switch-default>
							    <h3>Example</h3>
							    <p><span class="pass">Helpful</span> "I forgot to book the plane tickets"</p>
							    <p><span class="fail">Less helpful</span> "I'm such an idiot because I'm so forgetful and now I've ruined the holiday"</p>
							</div>
							<div class="large-5 columns help" ng-switch-when="2">
							    <h3>What do I write?</h3>
							    <p>Everything you're feeling at the moment, whether or not it's connected to the problem. This stage helps you to identify your feelings so you can see if they change through the process.</p>
							</div>
							<div class="large-5 columns help" ng-switch-when="3">
							    <h3>Write down</h3>
							    <ul class="help-list">
							    	<li>what <strong>people</strong> might have thought</li>
							    	<li>what could happen in the <strong>future</strong></li>
							    	<li>what this makes you think of <strong>yourself</strong>.</li>
							    </ul>
							</div>
							<div class="large-5 columns " ng-switch-when="4">
							    <div class="row">
							    	<!--div class="columns-12 small">
								    	<label>Enter here any thoughts that come to mind as you make your selections</label>
								    	<textarea ng-model="changeStep.reformedThought" class="tall-textarea" ng-keyup="firstDistortionSelected['focusText'] = true" rows="40"></textarea>
							    	</div-->
							    </div>
							</div>
							<div class="large-5 columns help" ng-switch-when="5">
								<h3>That's it!</h3>
							    <p>You're done. Read carefully through the passage on the left to consolidate the new more rational thought.
							    <p>Did this help?</p>
							    <p>
							    	<a class="button pass" ng-click="setFinalThought('yes')">Yes, this was helpful</a> <a class="button fail" ng-click="setFinalThought('no')">No, I feel the same/worse</a>
							   	</p>
							    <p style="display:none">
									<a class="button" href="#/dashboard">Start Again/See record of previous problems</a>
								</p>
							</div>
							</div>
						</div>

					</div>
				</div>
				<div ng-include="'partials/intro-modal.html'"></div>
